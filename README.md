# ğŸ± TON Cat Lottery â€” Web3 è²“å’ª NFT æŠ½çå¹³å°

> ä¸€å€‹åŸºæ–¼ TON å€å¡Šéˆçš„éˆä¸ŠæŠ½çç³»çµ±ï¼ŒåƒåŠ è€…å¯æ”¯ä»˜å°‘é‡ TON åƒèˆ‡æŠ½çï¼Œæœ‰æ©Ÿæœƒè´å¾—é™é‡ç‰ˆè²“å’ª NFTã€‚å‰ç«¯ä½¿ç”¨ React + TonConnectï¼Œå¾Œç«¯ç‚º Go èªè¨€å¯¦ä½œè‡ªå‹•æŠ½çæ©Ÿå™¨äººï¼Œæ•´é«”éƒ¨ç½²æ¡ç”¨å®¹å™¨ï¼ˆDockerï¼‰åŒ–ï¼Œä¸¦æ•´åˆ CI/CD èˆ‡ç›£æ§ã€‚

---

## âœ¨ å°ˆæ¡ˆäº®é»

- ğŸš€ **å…¨éˆä¸Šé‚è¼¯**ï¼šä½¿ç”¨ Tact æ’°å¯«æ™ºèƒ½åˆç´„ï¼Œè² è²¬æŠ½çèˆ‡ NFT ç™¼é€
- ğŸ¦¾ **å¾Œç«¯è‡ªå‹•åŒ–æŠ½çæ©Ÿå™¨äºº**ï¼šGo æ’°å¯« RPC èª¿ç”¨é‚è¼¯ï¼Œè‡ªå‹•è§¸ç™¼ä¸­çé‚è¼¯
- ğŸ’» **å‰ç«¯èˆ‡éŒ¢åŒ…äº’å‹•**ï¼šReact + TonConnectï¼Œèˆ‡ TON éŒ¢åŒ…æ•´åˆåƒèˆ‡æŠ½ç
- ğŸ“¦ **Docker å®¹å™¨åŒ–**ï¼šå¾Œç«¯ã€å‰ç«¯ã€ç¯€é»ã€ç›£æ§æ¨¡çµ„çš†ç‚ºç¨ç«‹å®¹å™¨
- âš™ï¸ **å®Œæ•´ DevOps ç®¡ç·š**ï¼šTerraformã€GitHub Actionsã€Prometheusã€Grafana
- ğŸ§© **NFT åˆç´„**ï¼šæ”¯æ´éš¨æ©Ÿç™¼é€é™é‡è²“å’ª NFTï¼Œç¬¦åˆ TON NFT æ¨™æº–

---

## ğŸ–¼ï¸ ç³»çµ±æ¶æ§‹åœ–

```
[ä½¿ç”¨è€…] â‡„ [React å‰ç«¯ dApp] â‡„ [TON æ™ºèƒ½åˆç´„ + TON Node]
  â‡“
[Go RPC Server è‡ªå‹•æŠ½ç]
  â‡“
[NFT ç™¼é€ / éˆä¸Šçµæœé€šçŸ¥]
  â‡“
[Prometheus + Grafana ç›£æ§æ¨¡çµ„]
```

---

## ğŸ“¦ å°ˆæ¡ˆç›®éŒ„çµæ§‹

```bash
ton-cat-lottery/
â”œâ”€â”€ contracts/             # Tact æ™ºèƒ½åˆç´„
â”‚   â”œâ”€â”€ CatLottery.tact        # ä¸»æŠ½çåˆç´„
â”‚   â”œâ”€â”€ CatNFT.tact            # è²“å’ª NFT åˆç´„
â”‚   â”œâ”€â”€ tact.config.json       # Tact ç·¨è­¯é…ç½®
â”‚   â”œâ”€â”€ scripts/               # éƒ¨ç½²èˆ‡äº’å‹•è…³æœ¬
â”‚   â”‚   â”œâ”€â”€ deploy.ts          # æŠ½çåˆç´„éƒ¨ç½²
â”‚   â”‚   â”œâ”€â”€ deploy-nft.ts      # NFT åˆç´„éƒ¨ç½²
â”‚   â”‚   â”œâ”€â”€ interact.ts        # åˆç´„äº’å‹•
â”‚   â”‚   â””â”€â”€ verify.ts          # åˆç´„é©—è­‰
â”‚   â”œâ”€â”€ tests/                 # åˆç´„æ¸¬è©¦
â”‚   â”‚   â””â”€â”€ CatLottery.test.ts # æŠ½çåˆç´„æ¸¬è©¦
â”‚   â””â”€â”€ build/                 # æ§‹å»ºç”¢ç‰©
â”‚       â”œâ”€â”€ CatLottery_*       # æŠ½çåˆç´„æ§‹å»ºæ–‡ä»¶
â”‚       â””â”€â”€ CatNFT_*           # NFT åˆç´„æ§‹å»ºæ–‡ä»¶
â”œâ”€â”€ backend/               # Go æŠ½çæ©Ÿå™¨äººæœå‹™
â”‚   â”œâ”€â”€ main.go               # ä¸»ç¨‹å¼å…¥å£
â”‚   â”œâ”€â”€ go.mod                # Go æ¨¡çµ„å®šç¾©
â”‚   â”œâ”€â”€ test.sh               # æ¸¬è©¦è…³æœ¬
â”‚   â”œâ”€â”€ config/               # é…ç½®æ¨¡çµ„
â”‚   â”œâ”€â”€ pkg/                  # å…¬å…±åŒ…
â”‚   â”‚   â””â”€â”€ logger/           # æ—¥èªŒæ¨¡çµ„
â”‚   â”‚       â”œâ”€â”€ logger.go
â”‚   â”‚       â””â”€â”€ logger_test.go
â”‚   â””â”€â”€ internal/             # å…§éƒ¨æ¥­å‹™æ¨¡çµ„
â”‚       â”œâ”€â”€ config/           # é…ç½®ç®¡ç†
â”‚       â”œâ”€â”€ lottery/          # æŠ½çæ ¸å¿ƒé‚è¼¯
â”‚       â”‚   â”œâ”€â”€ service.go
â”‚       â”‚   â”œâ”€â”€ service_test.go
â”‚       â”‚   â””â”€â”€ integration_test.go
â”‚       â”œâ”€â”€ wallet/           # éŒ¢åŒ…ç®¡ç†
â”‚       â”‚   â”œâ”€â”€ manager.go
â”‚       â”‚   â””â”€â”€ manager_test.go
â”‚       â”œâ”€â”€ transaction/      # äº¤æ˜“ç›£æ§
â”‚       â”‚   â”œâ”€â”€ monitor.go
â”‚       â”‚   â””â”€â”€ monitor_test.go
â”‚       â””â”€â”€ ton/              # TON å€å¡Šéˆå®¢æˆ¶ç«¯
â”‚           â”œâ”€â”€ client.go
â”‚           â””â”€â”€ client_test.go
â”œâ”€â”€ frontend/              # React + TonConnect å‰ç«¯ dApp
â”‚   â”œâ”€â”€ package.json          # NPM ä¾è³´ç®¡ç†
â”‚   â”œâ”€â”€ vite.config.ts        # Vite æ§‹å»ºé…ç½®
â”‚   â”œâ”€â”€ tsconfig.json         # TypeScript é…ç½®
â”‚   â”œâ”€â”€ index.html            # HTML å…¥å£
â”‚   â”œâ”€â”€ public/               # éœæ…‹è³‡æº
â”‚   â”‚   â”œâ”€â”€ index.html
â”‚   â”‚   â”œâ”€â”€ tonconnect-manifest.json
â”‚   â”‚   â””â”€â”€ vite.svg
â”‚   â””â”€â”€ src/                  # æºä»£ç¢¼
â”‚       â”œâ”€â”€ main.tsx          # React å…¥å£
â”‚       â”œâ”€â”€ App.tsx           # ä¸»æ‡‰ç”¨çµ„ä»¶
â”‚       â”œâ”€â”€ App.css           # æ‡‰ç”¨æ¨£å¼
â”‚       â”œâ”€â”€ index.css         # å…¨å±€æ¨£å¼
â”‚       â”œâ”€â”€ components/       # React çµ„ä»¶
â”‚       â”‚   â”œâ”€â”€ WalletConnect.tsx     # éŒ¢åŒ…é€£æ¥çµ„ä»¶
â”‚       â”‚   â”œâ”€â”€ ContractStatus.tsx    # åˆç´„ç‹€æ…‹é¡¯ç¤º
â”‚       â”‚   â”œâ”€â”€ JoinLottery.tsx       # åƒèˆ‡æŠ½ççµ„ä»¶
â”‚       â”‚   â””â”€â”€ Toast.tsx             # é€šçŸ¥çµ„ä»¶
â”‚       â”œâ”€â”€ services/         # æ¥­å‹™æœå‹™
â”‚       â”‚   â””â”€â”€ contractService.ts    # åˆç´„æœå‹™
â”‚       â”œâ”€â”€ hooks/            # React Hooks
â”‚       â”‚   â””â”€â”€ useToast.ts
â”‚       â”œâ”€â”€ styles/           # æ¨£å¼æ–‡ä»¶
â”‚       â”œâ”€â”€ assets/           # éœæ…‹è³‡æº
â”‚       â””â”€â”€ utils/            # å·¥å…·å‡½æ•¸
â”œâ”€â”€ monitoring/            # Prometheus / Grafana è¨­å®š
â”‚   â”œâ”€â”€ prometheus.yml
â”‚   â””â”€â”€ dashboards/
â”œâ”€â”€ docker/                # å„æ¨¡çµ„ Dockerfile
â”‚   â”œâ”€â”€ Dockerfile.frontend
â”‚   â””â”€â”€ Dockerfile.backend
â”œâ”€â”€ .github/workflows/     # GitHub Actions CI/CD è¨­å®š
â”‚   â””â”€â”€ deploy.yml
â””â”€â”€ README.md
```

---

## ğŸ§  æ ¸å¿ƒåŠŸèƒ½æ¨¡çµ„

### ğŸ¯ æ™ºèƒ½åˆç´„ï¼ˆCatLottery.tactï¼‰

- å®Œæ•´åˆç´„èªªæ˜è«‹åƒè€ƒï¼š [NFT åˆç´„æ–‡æª”](docs/NFTREADME.md)
- æ•…äº‹èªªæ˜è«‹åƒè€ƒï¼š [è²“å’ªæ¨‚åœ’æŠ½çæ•…äº‹](docs/NFTStory.md)
- å®šç¾©æŠ½çè¦å‰‡ (3 äººæ»¿å“¡æŠ½ç)
- ç®¡ç†åƒèˆ‡è€…è³‡æ–™ (åœ°å€ã€è²»ç”¨ã€æ™‚é–“)
- åŸ·è¡Œéš¨æ©ŸæŠ½ç (åŸºæ–¼å€å¡Šéˆéš¨æ©Ÿæ€§)
- ç™¼é€ NFT çµ¦ä¸­çè€…
- ç®¡ç†åˆç´„ç‹€æ…‹ (æ´»èº/éæ´»èº)
- Function:
  ```typescript
  // CatLottery.tact
  join(): æ”¯ä»˜ TON ä¸¦åŠ å…¥æŠ½çæ± 
  drawWinner(): éš¨æ©Ÿé¸å‡ºä¸­çè€…ä¸¦ç™¼é€ NFT
  sendNFT(address): èª¿ç”¨ NFT åˆç´„ä¸¦ç™¼é€å°æ‡‰è²“å’ª NFT
  ```

### ğŸ§° å¾Œç«¯è‡ªå‹•æŠ½çæ©Ÿå™¨äººï¼ˆGoï¼‰

- å®Œæ•´å¾Œç«¯èªªæ˜è«‹åƒè€ƒï¼š [å¾Œç«¯æ–‡æª”](docs/BackREADME.md)
- å®šæ™‚æª¢æŸ¥åˆç´„ç‹€æ…‹ (æ¯ 30 åˆ†é˜)
- è‡ªå‹•è§¸ç™¼æŠ½ç (ç•¶äººæ•¸é”åˆ° 3 äºº)
- ç™¼é€ drawWinner äº¤æ˜“
- ç›£æ§äº¤æ˜“çµæœ
- è¨˜éŒ„æŠ½çæ­·å²

### ğŸ’» å‰ç«¯ dApp

- ä½¿ç”¨ TonConnect SDK é€£æ¥ Tonkeeper éŒ¢åŒ…
- é¡¯ç¤ºåˆç´„ç‹€æ…‹ (åƒèˆ‡äººæ•¸ã€è²»ç”¨ã€è¼ªæ¬¡)
- åƒèˆ‡æŠ½çåŠŸèƒ½ (ç™¼é€ join äº¤æ˜“)
- äº¤æ˜“ç‹€æ…‹æç¤º (æˆåŠŸ/å¤±æ•—é€šçŸ¥)
- ç”¨æˆ¶é«”é©—å„ªåŒ– (éŸ¿æ‡‰å¼è¨­è¨ˆ)

---

## âš™ï¸ DevOps æ¶æ§‹ç´°ç¯€

- Docker èªªæ˜è«‹åƒè€ƒï¼š [Docker æ–‡æª”](docs/DockerREADME.md)
- ä½¿ç”¨ Docker Compose å•Ÿå‹•å®Œæ•´ç’°å¢ƒï¼ˆå‰å¾Œç«¯ + Node + ç›£æ§ï¼‰
- Prometheus æ”¶é›†ï¼š
  - Node block é«˜åº¦ã€å»¶é²
  - æŠ½çæˆåŠŸç‡
  - NFT å‚³é€éŒ¯èª¤ç‡
- Grafana è¦–è¦ºåŒ–å„€è¡¨æ¿ï¼šå¯è¦–åŒ–æŠ½çæ´»å‹•ã€æœå‹™ç‹€æ…‹
- GitHub Actions è‡ªå‹•åŒ–ï¼š
  - Commit â†’ ç·¨è­¯ â†’ è‡ªå‹•éƒ¨ç½²è‡³ VPS

---

## ğŸ› ï¸ ç’°å¢ƒéœ€æ±‚

```
- Node.js >= 22.18.0
- Go >= 1.24.5
- Docker & Docker Compose
- Tact CLI
```

---

## ğŸ§ª æ¸¬è©¦æŒ‡ä»¤

### æ¸¬è©¦æ™ºèƒ½åˆç´„

```bash
cd contracts
npm run test
```

### æ¸¬è©¦ Go å¾Œç«¯

```bash
cd backend
./test.sh
```

### æ¸¬è©¦å‰ç«¯

```bash
cd frontend
npm run build
```

---

## ğŸš€ æ™ºèƒ½åˆç´„éƒ¨ç½²

> åœ¨é‹è¡Œæ‡‰ç”¨ä¹‹å‰ï¼Œéœ€è¦å…ˆéƒ¨ç½²æ™ºèƒ½åˆç´„åˆ° TON å€å¡Šéˆã€‚

### éƒ¨ç½²åˆ°æ¸¬è©¦ç¶²

```bash
# é€²å…¥åˆç´„ç›®éŒ„
cd contracts

# å®‰è£ä¾è³´
npm install

# éƒ¨ç½²åˆç´„åˆ°æ¸¬è©¦ç¶²
npx blueprint run deployCatLottery --testnet --tonconnec
```

### éƒ¨ç½²å¾Œè¨­å®š

1. **è¨˜éŒ„åˆç´„åœ°å€**: éƒ¨ç½²å®Œæˆå¾Œï¼Œå°‡é¡¯ç¤ºçš„åˆç´„åœ°å€è¨˜éŒ„ä¸‹ä¾†
2. **æ›´æ–°ç’°å¢ƒè®Šæ•¸**: åœ¨ `.env` æª”æ¡ˆä¸­è¨­å®šåˆç´„åœ°å€
   ```bash
   LOTTERY_CONTRACT_ADDRESS=ä½ çš„æŠ½çåˆç´„åœ°å€
   NFT_CONTRACT_ADDRESS=ä½ çš„NFTåˆç´„åœ°å€
   ```

#### éƒ¨ç½²åˆ°ä¸»ç¶²

```bash
# éƒ¨ç½²åˆ°ä¸»ç¶² (è«‹ç¢ºä¿éŒ¢åŒ…æœ‰è¶³å¤ çš„ TON)
npx blueprint run deployCatLottery --mainnet --tonconnec
```

âš ï¸ **æ³¨æ„**: ä¸»ç¶²éƒ¨ç½²éœ€è¦çœŸå¯¦çš„ TON ä»£å¹£ä½œç‚º gas è²»ç”¨ã€‚

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

1. éƒ¨ç½²æ™ºèƒ½åˆç´„ï¼Œè«‹åƒè€ƒï¼š[æ™ºèƒ½åˆç´„éƒ¨ç½²](#æ™ºèƒ½åˆç´„éƒ¨ç½²)

2. æ–°å¢ç’°å¢ƒè®Šæ•¸

```bash
cp .env.example .env
```

3. ä½¿ç”¨ docker compose å•Ÿå‹•æ‰€æœ‰æœå‹™

```bash
docker compose up -d
```

---

## ğŸ“ˆ ç¤ºæ„åœ–ï¼ˆå¯æ”¾åˆ° GitHubï¼‰

- dApp æ“ä½œç•«é¢æˆªåœ–:
<!-- Image of dApp -->

- NFT é¡¯ç¤ºåœ–:
<!-- Image of NFT -->

- Grafana ç›£æ§åœ–:
<!-- Image of Grafana -->

---

## ğŸ“š æŠ€è¡“æ£§

| é¡åˆ¥     | æŠ€è¡“                           |
| -------- | ------------------------------ |
| ç¨‹å¼èªè¨€ | Typescript, Go, Node.js, React |
| å€å¡Šéˆ   | TON, Tact, TonConnect          |
| å¾Œç«¯     | Go, Node.js                    |
| å‰ç«¯     | React                          |
| éƒ¨ç½²     | Docker, GitHub Actions, k8s    |
| ç›£æ§     | Prometheus, Grafana            |
| åŸºç¤è¨­æ–½ | Terraform, GCP                 |

---

## ğŸ TODO Checklist - åŠŸèƒ½å°å‘æ¨¡çµ„æ‹†è§£

> æœ¬æ¸…å–®ä¾ç…§åŠŸèƒ½æ¨¡çµ„æ‹†è§£ç‚ºå¯åŸ·è¡Œä»»å‹™ï¼Œä¾¿æ–¼é–‹ç™¼èˆ‡é€²åº¦è¿½è¹¤ã€‚

### æ™ºèƒ½åˆç´„æ¨¡çµ„ï¼ˆTactï¼‰

> å®šç¾©å¥½ã€ŒæŠ½çæ€éº¼é‹ä½œã€ã€Œæ€éº¼ç™¼ NFTã€ã€Œåƒèˆ‡è€…æ€éº¼åŠ å…¥ã€ã€‚

- [x] åˆå§‹åŒ– `CatLottery.tact` åˆç´„çµæ§‹ï¼ˆå®šç¾© join/drawWinner/sendNFTï¼‰
- [x] è¨­è¨ˆå„²å­˜åƒåŠ è€…è³‡æ–™çš„ Cell çµæ§‹ï¼ˆå„²å­˜åœ°å€åˆ—è¡¨ï¼‰
- [x] å¯¦ä½œ `join()` æ–¹æ³•ï¼ˆæ”¶æ¬¾ + å„²å­˜åƒèˆ‡è€…ï¼‰
- [x] å¯¦ä½œ `drawWinner()` æ–¹æ³•ï¼ˆæ ¹æ“š block hash éš¨æ©Ÿé¸å–ï¼‰
- [x] å¯¦ä½œ `sendNFT(address)`ï¼šè§¸ç™¼ NFT åˆç´„è½‰ç§»
- [x] æ’°å¯«å–®å…ƒæ¸¬è©¦è…³æœ¬ï¼ˆæ¸¬è©¦åƒåŠ ã€æŠ½çã€è½‰ç§»é‚è¼¯ï¼‰
- [x] ä½¿ç”¨ `tact` CLI éƒ¨ç½²è‡³ testnet
- [x] æ’°å¯« NFT åˆç´„ï¼ˆç¬¦åˆ TON NFT è¦ç¯„ï¼Œæ”¯æ´ metadataï¼‰
- [x] é‘„é€ ä¸¦éƒ¨ç½²é è¨­çš„ NFTï¼ˆè²“å’ªåœ–åƒï¼‰
- [x] éƒ¨ç½²æŠ½çåˆç´„åˆ° TON testnet
- [ ] éƒ¨ç½² NFT åˆç´„åˆ° TON testnet

### å¾Œç«¯æœå‹™æ¨¡çµ„ï¼ˆGoï¼‰

> ç²¾ç°¡ç‰ˆå¾Œç«¯ï¼Œå°ˆæ³¨æ–¼æ ¸å¿ƒæŠ½çåŠŸèƒ½ï¼Œæ¸›å°‘å¯¦ä½œè¤‡é›œåº¦ä½†ä¿æŒå°ˆæ¡ˆå®Œæ•´æ€§ã€‚

- åŸºç¤è¨­æ–½

  - [x] åˆå§‹åŒ– Go å°ˆæ¡ˆèˆ‡æ¨¡çµ„è¨­å®šï¼ˆgo.mod, ç›®éŒ„çµæ§‹ï¼‰
  - [x] åŸºç¤é…ç½®ç®¡ç†ï¼ˆç’°å¢ƒè®Šæ•¸ã€åˆç´„åœ°å€ã€ç§é‘°ï¼‰
  - [x] åŸºç¤æ—¥å¿—è¨˜éŒ„ï¼ˆå¯ç”¨æ¨™æº– log å¥—ä»¶ï¼‰

- æ™ºèƒ½åˆç´„äº’å‹•

  - [x] æ’°å¯« TonCenter API å®¢æˆ¶ç«¯ï¼ˆåŸºç¤æŸ¥è©¢åŠŸèƒ½ï¼‰
  - [x] å¯¦ä½œéŒ¢åŒ…ç®¡ç†èˆ‡äº¤æ˜“ç°½å
  - [x] æ ¸å¿ƒæŠ½çåŠŸèƒ½ï¼š
    - [x] `GetContractInfo()` - æŸ¥è©¢æŠ½çç‹€æ…‹
    - [x] `SendDrawWinner()` - åŸ·è¡ŒæŠ½ç
    - [x] `SendStartNewRound()` - é–‹å§‹æ–°è¼ªæ¬¡
  - [x] åŸºç¤äº¤æ˜“ç›£æ§ï¼ˆæª¢æŸ¥äº¤æ˜“æ˜¯å¦æˆåŠŸï¼‰

- æ ¸å¿ƒæ¥­å‹™é‚è¼¯

  - [x] å¯¦ä½œè‡ªå‹•æŠ½çå®šæ™‚å™¨ï¼ˆç°¡å–® cron job æˆ– tickerï¼‰
  - [x] åŸºç¤æŠ½çæµç¨‹æ§åˆ¶ï¼ˆæª¢æŸ¥æ¢ä»¶ â†’ åŸ·è¡ŒæŠ½ç â†’ è¨˜éŒ„çµæœï¼‰
  - [x] ç°¡å–®éŒ¯èª¤è™•ç†èˆ‡é‡è©¦æ©Ÿåˆ¶

- åŸºç¤æ¸¬è©¦

  - [x] æ’°å¯«æ ¸å¿ƒåŠŸèƒ½å–®å…ƒæ¸¬è©¦
  - [x] åŸºç¤é›†æˆæ¸¬è©¦ï¼ˆæŠ½çæµç¨‹æ¸¬è©¦ï¼‰

- å¯¦éš›æ¸¬è©¦
  - [ ] éˆæ¥åˆ°ç›£æ§åˆç´„ï¼Œä¸¦é€²è¡Œç›£æ§
  - [ ] éˆæ¥åˆ°æŠ½çåˆç´„ï¼Œä¸¦é€²è¡ŒæŠ½ç
  - [ ] éˆæ¥åˆ° NFT åˆç´„ï¼Œä¸¦é€²è¡Œ NFT ç™¼é€

### å‰ç«¯ dAppï¼ˆReact + TonConnectï¼‰

> åœ¨æ™ºèƒ½åˆç´„åˆæ­¥ç©©å®šå¾Œï¼Œä½ å¯ä»¥å»ºç«‹ dApp å‰ç«¯èˆ‡éŒ¢åŒ…äº’å‹•ã€‚

#### åŸºæœ¬åŠŸèƒ½

- [x] å»ºç«‹ React å°ˆæ¡ˆæ¶æ§‹ (Vite + TypeScript + åŸºç¤ CSS)
- [x] æ•´åˆ TonConnect SDK - æ”¯æ´ Tonkeeper éŒ¢åŒ…é€£æ¥èˆ‡æ–·é–‹
- [x] å»ºç«‹è‡ªå·±çš„ mainfest ç”¨ä¾†åšæ¸¬è©¦ï¼Œé€é cloudflare pages ä¾†éƒ¨ç½²
- [x] é¡¯ç¤ºåˆç´„ç‹€æ…‹ - åƒèˆ‡äººæ•¸ã€ç•¶å‰è¼ªæ¬¡ã€æŠ½çæ˜¯å¦æ´»èº
  - [x] ä½¿ç”¨æ¨¡æ“¬è³‡æ–™ä¾†é¡¯ç¤ºåˆç´„ç‹€æ…‹
  - [x] ä¸²æ¥çœŸå¯¦çš„åˆç´„è³‡æ–™
- [x] å¯¦ä½œåƒåŠ æŠ½çåŠŸèƒ½ - ç™¼é€ `join()` äº¤æ˜“ä¸¦æ”¯ä»˜åƒèˆ‡è²»ç”¨
  - [x] åˆç´„é‚„æ²’éƒ¨ç½²å®Œæˆï¼Œæ‰€ä»¥å…ˆä½¿ç”¨ç©º payload ä¾†æ¸¬è©¦
  - [x] åˆç´„éƒ¨ç½²å®Œæˆå¾Œï¼Œä½¿ç”¨ "join" æ¶ˆæ¯
- [x] é¡¯ç¤ºç”¨æˆ¶éŒ¢åŒ…è³‡è¨Š - åœ°å€ã€TON é¤˜é¡
- [x] åŸºç¤äº¤æ˜“ç‹€æ…‹æç¤º - ç™¼é€ä¸­ã€æˆåŠŸã€å¤±æ•—é€šçŸ¥
- [x] åŸºç¤éŒ¯èª¤è™•ç† - ç¶²è·¯éŒ¯èª¤ã€é¤˜é¡ä¸è¶³ã€æŠ½çå·²æ»¿ç­‰
- [ ] åƒèˆ‡è€…åˆ—è¡¨é¡¯ç¤º - ç•¶å‰è¼ªæ¬¡çš„åƒèˆ‡è€…åœ°å€
- [ ] é¡¯ç¤ºä¸­çæ­·å²è¨˜éŒ„ - æŸ¥è©¢æ­·å²è¼ªæ¬¡çš„ä¸­çè€…å’Œ NFT

#### é€²éšåŠŸèƒ½

- [ ] å¯¦ä½œå³æ™‚ç‹€æ…‹æ›´æ–° - å®šæœŸåˆ·æ–°åˆç´„ç‹€æ…‹ï¼ˆæ¯ 30 ç§’ï¼‰
- [ ] é¡¯ç¤ºçæ± è³‡è¨Š - ç•¶å‰åˆç´„é¤˜é¡å’Œé è¨ˆçé‡‘
- [ ] åŸºç¤éŸ¿æ‡‰å¼è¨­è¨ˆ - æ”¯æ´æ‰‹æ©Ÿå’Œæ¡Œé¢ç€è¦½

### DevOps / é›²ç«¯è‡ªå‹•åŒ–éƒ¨ç½²

> éšæ®µå¼ DevOps å¯¦ä½œæµç¨‹ï¼šDocker + Kubernetes + GCP + Terraform + CI/CD + GitHub Actions

| éšæ®µ | å…§å®¹                    | æŠ€è¡“                       | ç›®æ¨™       |
| ---- | ----------------------- | -------------------------- | ---------- |
| 1    | åŸºç¤å®¹å™¨åŒ–              | Docker + Docker Compose    | æœ¬åœ°ç’°å¢ƒ   |
| 2    | GCP ç’°å¢ƒå»ºç«‹èˆ‡æ‰‹å‹•éƒ¨ç½²  | GCP + GKE + k8s + Docker   | é›²ç«¯é©—è­‰   |
| 3    | Terraform + åŸºç¤ CI/CD  | Terraform + GitHub Actions | è‡ªå‹•åŒ–åŸºç¤ |
| 4    | å®Œæ•´ CI/CD Pipeline     | GitHub Actions + Multi-env | ä¼æ¥­ç´šæµç¨‹ |
| 5    | é€²éš DevOpsï¼ˆæœªä¾†å¯¦ä½œï¼‰ | å®Œæ•´å·¥å…·éˆ                 | ç”Ÿç”¢å°±ç·’   |

#### éšæ®µ 1ï¼šåŸºç¤å®¹å™¨åŒ–

**æŠ€è¡“æ£§ï¼šDocker + Docker Compose**

- [x] æ’°å¯« `Dockerfile`ï¼ˆbackendï¼‰
- [x] æ’°å¯« `Dockerfile`ï¼ˆfrontendï¼‰
- [x] æ’°å¯« `docker-compose.yml` æ•´åˆå¾Œç«¯ / å‰ç«¯
- [x] æ’°å¯« `.env` æª”æ¡ˆèˆ‡ secret ç®¡ç†
- [x] æœ¬åœ° Docker ç’°å¢ƒé©—è­‰èˆ‡æ¸¬è©¦

#### éšæ®µ 2ï¼šGCP ç’°å¢ƒå»ºç«‹èˆ‡æ‰‹å‹•éƒ¨ç½²

**æŠ€è¡“æ£§ï¼šGCP + GKE + Kubernetes + Docker**  
**ç›®æ¨™ï¼šå»ºç«‹é›²ç«¯åŸºç¤ç’°å¢ƒï¼Œæ‰‹å‹•éƒ¨ç½²é©—è­‰å¯è¡Œæ€§**

- [x] **GCP å°ˆæ¡ˆåˆå§‹è¨­å®š**ï¼š

  - [x] è¨»å†Š GCP å¸³è™Ÿï¼ˆæ–°ç”¨æˆ¶å¯ç²å¾— $300 å…è²»é¡åº¦ï¼‰
  - [x] å»ºç«‹å°ˆæ¡ˆ `ton-cat-lottery-dev`
  - [x] å•Ÿç”¨å¿…è¦ APIï¼ˆGKEã€Container Registryã€Cloud Buildï¼‰
  - [x] è¨­å®šè¨ˆè²»å¸³æˆ¶èˆ‡é ç®—å‘Šè­¦ï¼ˆ$50/æœˆ é–‹ç™¼é™åˆ¶ï¼‰

- [x] **æœ¬åœ°é–‹ç™¼å·¥å…·å®‰è£**ï¼š

  - [x] å®‰è£ Google Cloud SDKï¼š`curl https://sdk.cloud.google.com | bash`
  - [x] è¨­å®šèªè­‰ï¼š`gcloud auth login`
  - [x] è¨­å®šå°ˆæ¡ˆï¼š`gcloud config set project ton-cat-lottery-dev`
  - [x] å®‰è£ kubectlï¼š`gcloud components install kubectl`

- [x] **æ‰‹å‹•å»ºç«‹ GKE å¢é›†èˆ‡éƒ¨ç½²**ï¼š

  - [x] å»ºç«‹ Autopilot GKE å¢é›†ï¼ˆè‡ªå‹•ç®¡ç†ï¼Œæˆæœ¬ä½ï¼‰ï¼ˆéœ€ç­‰å¾… 5-10 åˆ†é˜ï¼‰
  - [x] å–å¾—å¢é›†æ†‘è­‰ï¼š`gcloud container clusters get-credentials`
  - [x] é©—è­‰é€£æ¥ï¼š`kubectl cluster-info`
  - [x] å»ºæ§‹ä¸¦æ¨é€ Docker æ˜ åƒåˆ° Google Container Registry
  - [x] å»ºç«‹åŸºæœ¬ K8s Deployment æª”æ¡ˆï¼ˆbackend + frontendï¼‰
  - [x] æ‰‹å‹•éƒ¨ç½²æ‡‰ç”¨åˆ° GKE
  - [x] å»ºç«‹ LoadBalancer Service å–å¾—å¤–éƒ¨ IP
  - [x] **é©—è­‰**ï¼šç¢ºä¿æ‡‰ç”¨åœ¨é›²ç«¯æ­£å¸¸é‹ä½œ

- [x] **è¨­å®š Cloudflare åŸŸåè§£æ**ï¼šè«‹åƒè€ƒ [Cloudflare åŸŸåè§£æ](docs/cloudflare-setup.md)

**å¸¸ç”¨æŒ‡ä»¤**ï¼š

```bash
# æª¢æŸ¥å¢é›†ç‹€æ…‹
kubectl get pods
kubectl get services
kubectl get deployments

# æŸ¥çœ‹ Pod æ—¥èªŒ
kubectl logs <pod-name>
kubectl logs -f <pod-name>  # å³æ™‚è¿½è¹¤æ—¥èªŒ

# é‡æ–°éƒ¨ç½²æ‡‰ç”¨
kubectl rollout restart deployment/frontend-deployment

# æ‡‰ç”¨é…ç½®è®Šæ›´
kubectl apply -f k8s/frontend-deployment.yaml

# å»ºæ§‹ä¸¦æ¨é€ Docker æ˜ åƒ
docker buildx build --platform linux/amd64 --target production -f docker/Dockerfile.frontend -t gcr.io/ton-cat-lottery-dev/frontend:latest .
docker push gcr.io/ton-cat-lottery-dev/frontend:latest

# æª¢æŸ¥å¢é›†è³‡è¨Š
kubectl cluster-info
kubectl get nodes

# é€²å…¥ Pod å…§éƒ¨
kubectl exec -it <pod-name> -- sh

# Cloudflare åŸŸåç®¡ç†
kubectl get service frontend-service -o jsonpath='{.status.loadBalancer.ingress[0].ip}'  # ç²å–å¤–éƒ¨ IP
nslookup dev.yourdomain.com  # æª¢æŸ¥åŸŸåè§£æ
curl -I https://dev.yourdomain.com  # æ¸¬è©¦åŸŸåè¨ªå•
```

#### éšæ®µ 3ï¼šåŸºç¤è‡ªå‹•åŒ–éƒ¨ç½²

**æŠ€è¡“æ£§ï¼šTerraform + GitHub Actions + GCP + Kubernetes**  
**ç›®æ¨™ï¼šå°‡æ‰‹å‹•æ“ä½œè‡ªå‹•åŒ–ï¼Œä¿æŒç°¡å–®å¯¦ç”¨**

- [ ] **å»ºç«‹ Terraform åŸºç¤è¨­æ–½**ï¼š

  ```
  terraform/
  â”œâ”€â”€ gke.tf          # GKE å¢é›†é…ç½®
  â”œâ”€â”€ variables.tf    # è®Šæ•¸å®šç¾©
  â”œâ”€â”€ outputs.tf      # è¼¸å‡ºå€¼
  â””â”€â”€ versions.tf     # ç‰ˆæœ¬ç´„æŸ
  ```

- [ ] **æ’°å¯« Terraform é…ç½®**ï¼š

  - [ ] `gke.tf` - Autopilot GKE å¢é›†ç®¡ç†
  - [ ] `variables.tf` - å°ˆæ¡ˆ IDã€å€åŸŸç­‰è®Šæ•¸
  - [ ] `outputs.tf` - å¢é›†è³‡è¨Šè¼¸å‡º
  - [ ] é©—è­‰ Terraform éƒ¨ç½²èˆ‡æ‰‹å‹•å»ºç«‹çµæœä¸€è‡´

- [ ] **Terraform ç‹€æ…‹ç®¡ç†**ï¼š

  - [ ] ä½¿ç”¨æœ¬åœ°ç‹€æ…‹ç®¡ç†ï¼ˆé–‹ç™¼éšæ®µï¼‰
  - [ ] æ¸¬è©¦ `terraform apply` å’Œ `terraform destroy`
  - [ ] é©—è­‰å¯ä»¥é‡ç¾ç¾æœ‰çš„ GKE è¨­å®š

- [ ] **åŸºç¤ CI/CD è¨­å®š**ï¼š
  - [ ] å»ºç«‹ `.github/workflows/deploy.yml`
  - [ ] è¨­å®š GCP Service Account èªè­‰
  - [ ] å¯¦ç¾æµç¨‹ï¼šBuild Docker â†’ Push to GCR â†’ Deploy to GKE
  - [ ] è¨­å®š GitHub Secretsï¼ˆGCP èªè­‰ã€å°ˆæ¡ˆ IDï¼‰
  - [ ] ç«¯åˆ°ç«¯æ¸¬è©¦ï¼šä¿®æ”¹ç¨‹å¼ç¢¼ â†’ Push â†’ è‡ªå‹•éƒ¨ç½² â†’ é©—è­‰

#### éšæ®µ 4ï¼šé€²éš CI/CD èˆ‡å¤šç’°å¢ƒéƒ¨ç½²

**æŠ€è¡“æ£§ï¼šGitHub Actions + Terraform + Kubernetes + GCP**  
**ç›®æ¨™ï¼šä¼æ¥­ç´šè‡ªå‹•åŒ–éƒ¨ç½²æµç¨‹**

- [ ] **å¤šç’°å¢ƒ Terraform é…ç½®**ï¼š

  ```
  terraform/
  â”œâ”€â”€ environments/
  â”‚   â”œâ”€â”€ dev/         # é–‹ç™¼ç’°å¢ƒ
  â”‚   â”œâ”€â”€ staging/     # æ¸¬è©¦ç’°å¢ƒ
  â”‚   â””â”€â”€ prod/        # ç”Ÿç”¢ç’°å¢ƒ
  â””â”€â”€ modules/
      â””â”€â”€ gke/         # GKE å¢é›†æ¨¡çµ„
  ```

- [ ] **å¤šéšæ®µ CI/CD Pipeline**ï¼š

  - [ ] **Build Stage**: Docker å»ºæ§‹èˆ‡æ¨é€åˆ° GCR
  - [ ] **Test Stage**: å–®å…ƒæ¸¬è©¦ã€é›†æˆæ¸¬è©¦
  - [ ] **Deploy Stage**: Kubernetes æ»¾å‹•æ›´æ–°éƒ¨ç½²
  - [ ] **Verify Stage**: å¥åº·æª¢æŸ¥èˆ‡ç…™éœ§æ¸¬è©¦

- [ ] **GitHub Actions å·¥ä½œæµç¨‹**ï¼š

  - [ ] `ci.yml` - Pull Request æŒçºŒæ•´åˆé©—è­‰
  - [ ] `deploy-dev.yml` - é–‹ç™¼ç’°å¢ƒè‡ªå‹•éƒ¨ç½²
  - [ ] `deploy-staging.yml` - æ¸¬è©¦ç’°å¢ƒéƒ¨ç½²
  - [ ] `deploy-prod.yml` - ç”Ÿç”¢ç’°å¢ƒéƒ¨ç½²ï¼ˆæ‰‹å‹•æ ¸å‡†ï¼‰

- [ ] **ç’°å¢ƒç®¡ç†èˆ‡éƒ¨ç½²ç­–ç•¥**ï¼š
  - [ ] è¨­å®š GitHub Environments èˆ‡ Protection Rules
  - [ ] Kubernetes éƒ¨ç½²ç­–ç•¥ï¼ˆRolling Updateï¼‰
  - [ ] è‡ªå‹•å›æ»¾æ©Ÿåˆ¶èˆ‡å¥åº·æª¢æŸ¥
  - [ ] åŸŸåèˆ‡ SSL è‡ªå‹•åŒ–é…ç½®

#### éšæ®µ 5ï¼šé€²éš DevOps å¯¦è¸ï¼ˆæœªä¾†å¯¦ä½œï¼‰

**æŠ€è¡“æ£§ï¼šä¼æ¥­ç´šç›£æ§èˆ‡å®‰å…¨**  
**ç›®æ¨™ï¼šç”Ÿç”¢å°±ç·’çš„ç›£æ§ã€å®‰å…¨èˆ‡æˆæœ¬å„ªåŒ–**

- [ ] **ç›£æ§èˆ‡å¯è§€æ¸¬æ€§**ï¼š

  - [ ] Prometheus + Grafana éƒ¨ç½²åˆ° K8s
  - [ ] è‡ªå®šç¾©ç›£æ§æŒ‡æ¨™ï¼ˆæŠ½çæˆåŠŸç‡ã€NFT ç™¼é€å»¶é²ï¼‰
  - [ ] æ—¥èªŒèšåˆï¼ˆFluentd + Cloud Loggingï¼‰
  - [ ] å‘Šè­¦è¨­å®šï¼ˆSlack æ•´åˆï¼‰

- [ ] **å®‰å…¨æ€§èˆ‡èªè­‰**ï¼š

  - [ ] Workload Identity Federationï¼ˆç„¡é‡‘é‘°èªè­‰ï¼‰
  - [ ] GCP Secret Manager æ•´åˆ
  - [ ] Pod Security Standards
  - [ ] Container æ¼æ´æƒæï¼ˆTrivyï¼‰

- [ ] **æˆæœ¬å„ªåŒ–èˆ‡æ²»ç†**ï¼š

  - [ ] Cluster Autoscalerï¼ˆç¯€é»è‡ªå‹•ç¸®æ”¾ï¼‰
  - [ ] GCP é ç®—å‘Šè­¦èˆ‡æˆæœ¬ç›£æ§
  - [ ] è³‡æºä½¿ç”¨å„ªåŒ–

- [ ] **é€²éšåŠŸèƒ½**ï¼ˆå¯é¸ï¼‰ï¼š

  - [ ] åˆ†æ•£å¼è¿½è¹¤ï¼ˆJaegerï¼‰
  - [ ] è‡ªå‹•åŒ–æ¸¬è©¦èˆ‡éƒ¨ç½²ç­–ç•¥
  - [ ] ç½é›£æ¢å¾©èˆ‡å‚™ä»½ç­–ç•¥

- [ ] **é€²éšéƒ¨ç½²ç­–ç•¥**ï¼š
  - [ ] GitOps å·¥ä½œæµï¼ˆArgoCD / Fluxï¼‰
  - [ ] Canary ç™¼ä½ˆï¼ˆFlagger / Argo Rolloutsï¼‰
  - [ ] Feature Flags ç®¡ç†
  - [ ] Database Migration è‡ªå‹•åŒ–
  - [ ] è·¨å€åŸŸç½é›£æ¢å¾©

### æ¸¬è©¦èˆ‡é©—è­‰

> ç¢ºä¿å„æ¨¡çµ„é‹ä½œæ­£å¸¸ï¼Œä¸¦é©—è­‰æ•´é«”æµç¨‹ã€‚

- [ ] å–®å…ƒæ¸¬è©¦ï¼ˆGo æŠ½çé‚è¼¯ï¼‰
- [ ] åˆç´„æ¨¡æ“¬æ¸¬è©¦ï¼ˆjoin/draw/sendNFTï¼‰
- [ ] å‰ç«¯äº¤æ˜“æ¨¡æ“¬æ¸¬è©¦ï¼ˆä½¿ç”¨æ¸¬è©¦éŒ¢åŒ…ï¼‰
- [ ] æ•´åˆæ¸¬è©¦ï¼šåƒåŠ  âœ æŠ½ç âœ NFT ç™¼é€ âœ å‰ç«¯é¡¯ç¤º
- [ ] å¤šç”¨æˆ¶å£“åŠ›æ¸¬è©¦ï¼ˆä½¿ç”¨ Locust æˆ–è…³æœ¬ï¼‰

### æ–‡ä»¶èˆ‡å±•ç¤º

- [ ] å®Œå–„ `README.md`ï¼ˆå°ˆæ¡ˆç°¡ä»‹ã€å•Ÿå‹•æŒ‡å—ã€æŠ€è¡“æ£§ï¼‰
- [ ] æ’°å¯«éƒ¨ç½²æ•™å­¸æ–‡ä»¶ï¼ˆå« VPSã€Dockerã€CI/CDï¼‰
- [ ] è£½ä½œæ“ä½œç•«é¢æˆªåœ–èˆ‡å½±ç‰‡ demo
- [ ] æ’°å¯«ä½¿ç”¨èªªæ˜èˆ‡å¸¸è¦‹å•é¡Œ FAQ
- [ ] è£½ä½œé–‹æºç‰ˆæœ¬ç™¼ä½ˆï¼ˆç‰ˆæœ¬åŒ–ç®¡ç†ï¼‰
